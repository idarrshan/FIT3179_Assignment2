{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "config": {
      "view": {"stroke": null},
      "axis": {
        "domain": false,
        "labelColor": "#444",
        "titleColor": "#444"
      },
      "legend": {
        "orient": "bottom",
        "titleFontSize": 15,
        "labelFontSize": 12,
        "symbolSize": 80,
        "symbolLimit": 20,
        "rowPadding": 8,
        "columnPadding": 15,
        "columns": 3,
        "direction": "horizontal",
        "labelLimit": 0,
        "titleLimit": 0
      }
    },
    "params": [
      {
        "name": "rate_type_filter",
        "value": null,
        "bind": {
          "input": "select",
          "options": [
            null,
            "Fixed Deposit Rate (1mo)",
            "Fixed Deposit Rate (3mo)",
            "Fixed Deposit Rate (6mo)",
            "Fixed Deposit Rate (9mo)",
            "Fixed Deposit Rate (12mo)",
            "Savings Deposit Rate",
            "Base Rate (BR)",
            "Base Lending Rate (BLR)",
            "Avg Lending Rate (ALR) on Outstanding Loans"
          ],
          "labels": [
            "All Types",
            "Fixed Deposit Rate (1mo)",
            "Fixed Deposit Rate (3mo)",
            "Fixed Deposit Rate (6mo)",
            "Fixed Deposit Rate (9mo)",
            "Fixed Deposit Rate (12mo)",
            "Savings Deposit Rate",
            "Base Rate (BR)",
            "Base Lending Rate (BLR)",
            "Avg Lending Rate (ALR) on Outstanding Loans"
          ],
          "name": "Select Rate Type"
        }
      }
    ],
    "vconcat": [
      {
        "title": {
          "text": "Monthly Interest Rates (Bank Negara Malaysia)",
          "fontSize": 24,
          "font": "Time New Roman",
          "fontWeight": "bold"
        },
        "width": 1150,
        "height": 450,
        "data": {
          "url": "https://raw.githubusercontent.com/idarrshan/FIT3179_Assignment2/refs/heads/main/data/interest_rates.csv"
        },
        "transform": [
          {
            "lookup": "rate",
            "from": {
              "data": {
                "url": "https://raw.githubusercontent.com/idarrshan/FIT3179_Assignment2/refs/heads/main/data/money_banking_lookup.csv"
              },
              "key": "variable",
              "fields": ["variable_en"]
            }
          },
          {
            "aggregate": [
              {"op": "mean", "field": "value", "as": "mean_value"}
            ],
            "groupby": ["date", "variable_en"]
          },
          {
            "filter": "rate_type_filter == null || datum.variable_en == rate_type_filter"
          }
        ],
        "encoding": {
          "x": {
            "field": "date",
            "type": "temporal",
            "title": "Date",
            "axis": {"format": "%Y-%m", "titleFontSize": 16}
          },
          "y": {
            "field": "mean_value",
            "type": "quantitative",
            "title": "Mean Interest Rate (%)",
            "axis": {"titleFontSize": 16}
          },
          "color": {
            "condition": {
              "param": "hover",
              "field": "variable_en",
              "type": "nominal",
              "title": "Interest Rate Type",
              "scale": {"scheme": "category20b"}
            },
            "value": "gray"
          },
          "opacity": {
            "condition": {
              "param": "hover",
              "value": 1
            },
            "value": 0.2
          },
          "tooltip": [
            {"field": "date", "type": "temporal", "title": "Date", "format": "%Y-%m"},
            {"field": "variable_en", "type": "nominal", "title": "Rate Type"},
            {"field": "mean_value", "type": "quantitative", "title": "Mean Interest Rate (%)", "format": ".2f"}
          ]
        },
        "layer": [
          {
            "params": [{
              "name": "hover",
              "select": {
                "type": "point",
                "fields": ["variable_en"],
                "on": "mouseover"
              }
            }],
            "mark": {
              "type": "circle",
              "size": 15
            }
          },
          {
            "mark": "line"
          }
        ]
      }
    ]
  }
  